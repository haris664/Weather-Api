"use strict";var apiKey="52242a7b53e46644d662c726ecc77efe",todayWeatherEle=document.querySelector(".current-conditions"),forecastEle=document.querySelector(".forecast"),forecastWeather=[],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function setPosition(t){getWeather(t.coords.latitude,t.coords.longitude)}function showError(t){console.log(t.message)}function getWeather(t,e){fetch("http://api.openweathermap.org/data/2.5/weather?lat=".concat(t,"&lon=").concat(e,"&units=metric&appid=").concat(apiKey)).then(function(t){if(t.ok)return t.json();throw new Error("something went wrong")}).then(function(t){todayWeatherEle.textContent="",todayWeatherEle.insertAdjacentHTML("afterbegin",'\n    <h2>Current Conditions</h2>\n    <img src="http://openweathermap.org/img/wn/'.concat(t.weather[0].icon,'@2x.png" />\n    <div class="current">\n      <div class="temp">').concat(Math.round(t.main.temp),'&deg;C</div>\n      <div class="condition">').concat(t.weather[0].description,"</div>\n    </div>\n    "))}),fetch("http://api.openweathermap.org/data/2.5/forecast?lat=".concat(t,"&lon=").concat(e,"&units=metric&appid=").concat(apiKey)).then(function(t){if(t.ok)return t.json();throw new Error("there is something wrong")}).then(function(t){t.list.forEach(function(t){var e=new Date(t.dt_txt),n=forecastWeather.find(function(t){return t.date.getDay()===e.getDay()});void 0===n?forecastWeather.push({high:Math.round(t.main.temp),low:Math.round(t.main.temp),icon:t.weather[0].icon,description:t.weather[0].description,date:e}):(15===e.getHours()&&(n.icon=t.weather[0].icon,n.description=t.weather[0].description),n.low>Math.round(t.main.temp)?n.low=Math.round(t.main.temp):n.high<Math.round(t.main.temp)&&(n.high=Math.round(t.main.temp)))})}).then(function(){displayWeekWeather()})}function displayWeekWeather(){forecastEle.innerHTML="",forecastWeather.forEach(function(t){t.date.getDay()!==(new Date).getDay()&&forecastEle.insertAdjacentHTML("beforeend",'\n    <div class="day">\n          <h3>'.concat(days[t.date.getDay()],'</h3>\n          <img src="http://openweathermap.org/img/wn/').concat(t.icon,'@2x.png" />\n          <div class="description">').concat(t.description,'</div>\n          <div class="temp">\n            <span class="high">').concat(t.high,'℃</span>/<span class="low">').concat(t.low,"℃</span>\n          </div>\n        </div>\n    "))})}"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(setPosition,showError);